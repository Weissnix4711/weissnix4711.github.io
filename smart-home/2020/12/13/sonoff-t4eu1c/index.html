<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.24.0 by Michael Rose
  Copyright 2013-2020 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Hacking Sonoff T4EU1C with ESPHOME | Thomas Aldrian</title>
<meta name="description" content="No-neutral ESP8266-based smart switch by Sonoff">


  <meta name="author" content="Thomas Aldrian">
  
  <meta property="article:author" content="Thomas Aldrian">
  


<meta property="og:type" content="article">
<meta property="og:locale" content="en_GB">
<meta property="og:site_name" content="Thomas Aldrian">
<meta property="og:title" content="Hacking Sonoff T4EU1C with ESPHOME">
<meta property="og:url" content="https://weissnix4711.github.io/smart-home/2020/12/13/sonoff-t4eu1c/">


  <meta property="og:description" content="No-neutral ESP8266-based smart switch by Sonoff">



  <meta property="og:image" content="https://weissnix4711.github.io/assets/images/2020-12-13-sonoff-t4eu1c/t4eu1c.jpg">





  <meta property="article:published_time" content="2020-12-13T00:00:00+00:00">






<link rel="canonical" href="https://weissnix4711.github.io/smart-home/2020/12/13/sonoff-t4eu1c/">




<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    
      "@type": "Person",
      "name": "Thomas Aldrian",
      "url": "https://weissnix4711.github.io/"
    
  }
</script>







<!-- end _includes/seo.html -->



  <link href="/feed.xml" type="application/atom+xml" rel="alternate" title="Thomas Aldrian Feed">


<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
<noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css"></noscript>



    <!-- start custom head snippets -->

<!-- insert favicons. use https://realfavicongenerator.net/ -->

<!-- end custom head snippets -->

  </head>

  <body class="layout--single">
    <nav class="skip-links">
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
          <a class="site-logo" href="/"><img src="/assets/images/pfp.png" alt="Thomas Aldrian"></a>
        
        <a class="site-title" href="/">
          Thomas Aldrian
          <span class="site-subtitle">My blog</span>
        </a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a href="/about/">About</a>
            </li><li class="masthead__menu-item">
              <a href="/social/">Social</a>
            </li><li class="masthead__menu-item">
              <a href="/projects/">My Projects</a>
            </li></ul>
        
        <button class="search__toggle" type="button">
          <span class="visually-hidden">Toggle search</span>
          <i class="fas fa-search"></i>
        </button>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      
  







<div class="page__hero"
  style=" background-image: url('');"
>
  
    <img src="/assets/images/2020-12-13-sonoff-t4eu1c/t4eu1c.jpg" alt="Hacking Sonoff T4EU1C with ESPHOME" class="page__hero-image">
  
  
</div>




  
    



<nav class="breadcrumbs">
  <ol itemscope itemtype="https://schema.org/BreadcrumbList">
    
    
    
      
        <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
          <a href="https://weissnix4711.github.io/" itemprop="item"><span itemprop="name">~</span></a>
          <meta itemprop="position" content="1" />
        </li>
        <span class="sep">/</span>
      
      
        
        <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
          <a href="/categories/smart-home" itemprop="item"><span itemprop="name">Smart home</span></a>
          <meta itemprop="position" content="2" />
        </li>
        <span class="sep">/</span>
      
    
      
      
        
        <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
          <a href="/categories/2020" itemprop="item"><span itemprop="name">2020</span></a>
          <meta itemprop="position" content="3" />
        </li>
        <span class="sep">/</span>
      
    
      
      
        
        <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
          <a href="/categories/12" itemprop="item"><span itemprop="name">12</span></a>
          <meta itemprop="position" content="4" />
        </li>
        <span class="sep">/</span>
      
    
      
      
        
        <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
          <a href="/categories/13" itemprop="item"><span itemprop="name">13</span></a>
          <meta itemprop="position" content="5" />
        </li>
        <span class="sep">/</span>
      
    
      
      
        <li class="current">Hacking Sonoff T4EU1C with ESPHOME</li>
      
    
  </ol>
</nav>

  


<div id="main" role="main">
  
  <div class="sidebar sticky">
  <!--
  Modified from original:
  https://github.com/mmistakes/minimal-mistakes/blob/master/_includes/author-profile.html
  Minimal Mistakes Jekyll theme

  Distributed under the MIT License.
  See https://raw.githubusercontent.com/mmistakes/minimal-mistakes/master/LICENSE
-->




<div itemscope itemtype="https://schema.org/Person" class="h-card">

  
    <div class="author__avatar">
      <a href="https://weissnix4711.github.io/">
        <img src="/assets/images/pfp.png" alt="Thomas Aldrian" itemprop="image" class="u-photo">
      </a>
    </div>
  

  <div class="author__content">
    <h3 class="author__name p-name" itemprop="name">
      <a class="u-url" rel="me" href="https://weissnix4711.github.io/" itemprop="url">Thomas Aldrian</a>
    </h3>
    
      <div class="author__bio p-note" itemprop="description">
        <p>Electronic and Information Engineering Student, Imperial College London</p>

      </div>
    
  </div>

  <div class="author__urls-wrapper">
    <button class="btn btn--inverse">Follow</button>
    <ul class="author__urls social-icons">
      
        <li itemprop="homeLocation" itemscope itemtype="https://schema.org/Place">
          <i class="fas fa-fw fa-map-marker-alt" aria-hidden="true"></i> <span itemprop="name" class="p-locality">London, UK</span>
        </li>
      

      
        
          
            <li><a href="https://gitlab.com/weissnix47111" rel="nofollow noopener noreferrer me" itemprop="sameAs"><i class="fab fa-fw fa-gitlab" aria-hidden="true"></i><span class="label">GitLab</span></a></li>
          
        
          
            <li><a href="https://github.com/Weissnix4711" rel="nofollow noopener noreferrer me" itemprop="sameAs"><i class="fab fa-fw fa-github" aria-hidden="true"></i><span class="label">GitHub</span></a></li>
          
        
          
            <li><a href="https://fosstodon.org/@Weissnix4711" rel="nofollow noopener noreferrer me" itemprop="sameAs"><i class="fab fa-fw fa-mastodon" aria-hidden="true"></i><span class="label">Mastodon</span></a></li>
          
        
          
            <li><a href="mailto:aldrian.thom@proton.me" rel="nofollow noopener noreferrer me"><i class="fas fa-fw fa-envelope" aria-hidden="true"></i><span class="label">Email</span></a></li>
          
        
          
            <li><a href="https://ko-fi.com/thomasaldrian" rel="nofollow noopener noreferrer me" itemprop="sameAs"><i class="fas fa-fw fa-money-bill-wave" aria-hidden="true"></i><span class="label">Ko-fi</span></a></li>
          
        
      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      <!--
  <li>
    <a href="http://link-to-whatever-social-network.com/user/" itemprop="sameAs" rel="nofollow noopener noreferrer">
      <i class="fas fa-fw" aria-hidden="true"></i> Custom Social Profile Link
    </a>
  </li>
-->
    </ul>
  </div>
</div>

  
  </div>



  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="Hacking Sonoff T4EU1C with ESPHOME">
    <meta itemprop="description" content="No-neutral ESP8266-based smart switch by Sonoff">
    <meta itemprop="datePublished" content="2020-12-13T00:00:00+00:00">
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title" itemprop="headline">Hacking Sonoff T4EU1C with ESPHOME
</h1>
          

  <p class="page__meta">
    

    

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          5 minute read
        
      </span>
    
  </p>


        </header>
      

      <section class="page__content" itemprop="text">
        
          <aside class="sidebar__right sticky">
            <nav class="toc">
              <header><h4 class="nav__title"><i class="fas fa-file-alt"></i> On this page</h4></header>
              <ul class="toc__menu"><li><a href="#whats-this-a-no-neutral-wifi-controlled-smart-switch-made-by-sonoff">What’s this? A no-neutral WiFi-controlled smart switch made by Sonoff?</a></li><li><a href="#how-should-i-flash">How should I flash?</a><ul><li><a href="#sonota">SonOTA</a></li><li><a href="#serial">Serial</a><ul><li><a href="#raspberry-pi">Raspberry Pi</a></li><li><a href="#ttl-usb-adaptor">TTL-USB Adaptor</a></li><li><a href="#an-alternative-if-you-dont-have-either-of-the-above---nodemcu-or-other-development-board">An alternative if you don’t have either of the above - NodeMCU or other development board!</a></li><li><a href="#compiling-your-binary">Compiling your binary</a></li><li><a href="#setting-the-device-into-flashing-mode">Setting the device into flashing mode</a></li><li><a href="#gui-flashing-tools-for-beginners">GUI flashing tools (for beginners)</a></li><li><a href="#flashing-with-esptoolpy-slightly-more-advanced">Flashing with esptool.py (slightly more advanced)</a><ul><li><a href="#optional-make-a-backup-of-the-flash">(Optional) make a backup of the flash</a></li><li><a href="#writing-your-new-binary">Writing your new binary</a></li></ul></li></ul></li></ul></li><li><a href="#making-and-uploading-overtheair-the-final-firmware">Making and uploading (OverTheAir) the final firmware</a><ul><li><a href="#my-own-configuration-for-esphome">My own configuration for ESPHome</a></li></ul></li></ul>

            </nav>
          </aside>
        
        <h1 id="whats-this-a-no-neutral-wifi-controlled-smart-switch-made-by-sonoff">What’s this? A no-neutral WiFi-controlled smart switch made by Sonoff?</h1>

<p>Yep, that’s right. Just like the previous TX models <em>(Touch, T1, new-T1, T2, and T3)</em>, the T4 can be wirelessly controlled with the eWeLink app, or the touch sensor, and has a small LED to help you locate the switch in the dark. And best of all, there is no neutral connection required - only live in, and out (to the light bulb). Want to know more about how it works? I suggest watching <a href="https://www.youtube.com/watch?v=VNYcD7MEp4A">this YouTube video by SuperHouseTV</a>.</p>

<p>Before you go out and buy one for yourself, it’s important to note the few cons which exist with the new T4’s.</p>

<ul>
  <li>Firstly, they will (most likely) not work with any device which <em>isn’t</em> as light bulb. You cannot use them as a general-purpose smart switch.</li>
  <li>Also, LEDs and CFLs <em>are</em> supported, but require you to connect the included “anti flicker module” in parallel to the bulb(s).</li>
  <li>443 MHz is <em>not</em> supported by the T4 model, incase you were one of the three people in the world who actually used this feature.</li>
</ul>

<p>Like all of Sonoff’s products, the T4 is really easy to flash with your favourite custom firmware. I decided to go with ESPHome, because of the easy integration with <a href="https://hass.io/">Home Assistant</a> and super easy yaml configuration, but tasmota and espurna will also work.</p>

<h1 id="how-should-i-flash">How should I flash?</h1>

<p>For the first flash, you <strong>will most likely</strong> need to connect via UART. See below as to why SonOTA currently doesn’t work.</p>

<h2 id="sonota">SonOTA</h2>

<p>Sadly, the devices appear to all ship with firmware version 3, and are therefore not compatible with SonOTA. Even if SonOTA does end up adding support for v3, I would not recommend using this method. The device is <em>designed</em> to be easily taken apart, and it’s super easy to connect up to it via serial.</p>

<h2 id="serial">Serial</h2>

<h3 id="raspberry-pi">Raspberry Pi</h3>

<p>If you happen to have a Raspberry Pi (or similar SBC with <strong>3v3</strong> UART interface), you could use it without the need for an adaptor. This is the method I ended up choosing, as I did not happen to have a TTL-USB adaptor laying around, although I cannot recommend it for beginners. For further information, I recommend following these two guides:</p>

<ul>
  <li><a href="https://tasmota.github.io/docs/Flash-Sonoff-using-Raspberry-Pi/">Tasmota - Flash Sonoff using Raspberry Pi</a></li>
  <li><a href="https://www.sigmdel.ca/michel/ha/sonoff/flashing_sonoff_en.html">sigmdel.ca - Flashing a Sonoff with RPI</a></li>
</ul>

<p>PORT: Will most likely be /dev/ttyS0 on a RPI 3/4 or /dev/ttyAMA0 on a Pi 1/2/zero</p>

<h3 id="ttl-usb-adaptor">TTL-USB Adaptor</h3>

<p>The <a href="https://cdn.sparkfun.com/datasheets/Dev/Arduino/Other/CH340DS1.PDF">CH340G</a> appears to be the most common USB-SERIAL adaptor, although others (like FTDI FT232 or CP2102 will also work). They are extremely cheap, especially from eBay or AliExpress, and are <em>extremely</em> useful. It’s never too late to pick one (or 5) up. Be aware though, any ESP866-based device <strong>might get fried by 5v</strong>. Always remember to set your adaptor to 3v3.</p>

<p>PORT: Depends on your OS. On Linux, it is likely <code class="language-plaintext highlighter-rouge">/dev/ttyUSB0</code>. On Windows, <code class="language-plaintext highlighter-rouge">COM1</code> and on MacOS, <code class="language-plaintext highlighter-rouge">/dev/tty.usbserial</code>.</p>

<h3 id="an-alternative-if-you-dont-have-either-of-the-above---nodemcu-or-other-development-board">An alternative if you don’t have either of the above - NodeMCU or other development board!</h3>

<p>Many ESP8266 / ESP32 development boards come with an onboard USB port, TTL-USB adaptor and 3v3 regulator. In this example, I use a NodeMCU, but you do not need to do the same. Just make sure your device is 3v3 not 5v (eg. many Arduino’s), as this <strong>may fry your Sonoff T4</strong>.</p>

<table>
  <thead>
    <tr>
      <th>NodeMCU</th>
      <th>Sonoff</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>3v3</td>
      <td>3v3</td>
    </tr>
    <tr>
      <td>GND</td>
      <td>GND</td>
    </tr>
    <tr>
      <td>TX</td>
      <td>TX</td>
    </tr>
    <tr>
      <td>RX</td>
      <td>RX</td>
    </tr>
  </tbody>
</table>

<p><strong>Note:</strong></p>

<ul>
  <li>The TX and RX pins are “backwards”. This is correct.</li>
  <li>GND must also be connected to the NodeMCU’s ENable pin. This disables the NodeMCU.</li>
</ul>

<p>You can then plugin in your PC / Laptop to the development board via USB.</p>

<h3 id="compiling-your-binary">Compiling your binary</h3>

<p>This step will depend on which firmware you decide to use. ESPHome has a convenient setup wizard (<code class="language-plaintext highlighter-rouge">esphome your_node_name.yaml wizard</code>), and you can then compile the binary with <code class="language-plaintext highlighter-rouge">esphome your_node_name.yaml compile</code>. The binary will be located in <code class="language-plaintext highlighter-rouge">./your_node_name/.pioenvs/your_node_name/firmware.bin</code>.</p>

<p>Whichever firmware you choose, <strong>make sure you enable OTA updates, so you can upload new firmware later on without needing to take the switch apart</strong>.</p>

<h3 id="setting-the-device-into-flashing-mode">Setting the device into flashing mode</h3>

<p>The GPIO pin 0 needs to be connected to ground for the Sonoff T4 to be put into flashing mode. This is best achieved by connecting R10 (on the back of the PCB) to GND for ~10 seconds while the device is turned on (you connect the 3v3 from your serial adaptor).</p>

<p><img src="/assets/images/2020-12-13-sonoff-t4eu1c/r10.jpg" alt="r10" /></p>

<h3 id="gui-flashing-tools-for-beginners">GUI flashing tools (for beginners)</h3>

<p>Among your options are <a href="https://github.com/tasmota/tasmotizer">Tasmotizer</a> and <a href="https://github.com/esphome/esphome-flasher/">ESPHome-flasher</a>. Both are extremely intuitive so I won’t bother explaining how to use them.</p>

<h3 id="flashing-with-esptoolpy-slightly-more-advanced">Flashing with esptool.py (<em>slightly more</em> advanced)</h3>

<p>ESPTool requires either Python2.7, Python3.4 or newer. The latest stable release is easily installed with:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>pip2 <span class="nb">install </span>esptool <span class="c"># For Python2</span>
<span class="nv">$ </span>pip3 <span class="nb">install </span>esptool <span class="c"># For Python3</span>
</code></pre></div></div>

<ul>
  <li>Getting errors with pip3? Try <code class="language-plaintext highlighter-rouge">python -m pip install esptool</code></li>
  <li>On Windows or want an executable? Try <a href="https://github.com/igrr/esptool-ck/releases">this</a> instead of installing with pip.</li>
</ul>

<h4 id="optional-make-a-backup-of-the-flash">(Optional) make a backup of the flash</h4>

<p>You can do this with <code class="language-plaintext highlighter-rouge">esptool.py -p PORT read_flash 0 0x100000 flash_contents.bin</code>, where PORT depends on whether you are on Windows, using a USB adaptor, or Raspberry Pi. A new file will be created in your current working directory, called <code class="language-plaintext highlighter-rouge">flash_contents.bin</code>.</p>

<p>The Sonoff T4 works with the default baud rate of 115200. You do not need to bother changing this.</p>

<h4 id="writing-your-new-binary">Writing your new binary</h4>

<p>Now, you must power-cycle the device. Disconnect the 3v3 from your RPI / serial adaptor, short R10 to ground (using a jumper wire again), reconnect 3v3, wait 10 seconds, stop shorting R10 to ground.</p>

<p>After power cycling the device, you can upload the new firmware with the following command:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>esptool.py <span class="nt">-p</span> PORT write_flash 0x0 your_new_firmware.bin
</code></pre></div></div>

<p>Disconnect 3v3 one final time, then reconnect it (without the jumper wire between R10 and GND). Your T4 should connect to whatever WiFi network you specified when compiling the binary, and it should be fully functional (minus not having the relay connected). Once you have verified the device works, you can disconnect your serial adaptor / RPI and install the T4 in the desired location (following the instructions from the original manual).</p>

<p><img src="/assets/images/2020-12-13-sonoff-t4eu1c/wiring-diagram.jpg" alt="wiring-diagram" /></p>

<h1 id="making-and-uploading-overtheair-the-final-firmware">Making and uploading (OverTheAir) the final firmware</h1>

<p>Below you can find all three controllable components and which GPIO pin they are connected to. This will be helpful for you to configure your custom firmware.</p>

<table>
  <thead>
    <tr>
      <th>GPIO #</th>
      <th>Component</th>
      <th>Notes</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>GPIO0</td>
      <td>Touch Button 1</td>
      <td>Inverted</td>
    </tr>
    <tr>
      <td>GPIO12</td>
      <td>Relay 1</td>
      <td>Inverted</td>
    </tr>
    <tr>
      <td>GPIO13</td>
      <td>Led 1</td>
      <td>Inverted</td>
    </tr>
  </tbody>
</table>

<p>There currently only exists one variant of the T4, called T4EU1C. It only has one touch button and relay. If a 2 channel variant is released, the second relay will likely be on GPIO pin 5 and the second button on pin 9.</p>

<h2 id="my-own-configuration-for-esphome">My own configuration for ESPHome</h2>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">esphome</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">light_switch</span>
  <span class="na">platform</span><span class="pi">:</span> <span class="s">ESP8266</span>
  <span class="na">board</span><span class="pi">:</span> <span class="s">esp01_1m</span>

<span class="na">wifi</span><span class="pi">:</span>
  <span class="na">ssid</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Thomas</span><span class="nv"> </span><span class="s">Home"</span>
  <span class="na">password</span><span class="pi">:</span> <span class="s2">"</span><span class="s">NOPE!!"</span>

  <span class="c1"># Enable fallback hotspot (captive portal) in case wifi connection fails</span>
  <span class="na">ap</span><span class="pi">:</span>
    <span class="na">ssid</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Light</span><span class="nv"> </span><span class="s">Switch"</span>
    <span class="na">password</span><span class="pi">:</span> <span class="s2">"</span><span class="s">NOPE!!"</span>

<span class="na">captive_portal</span><span class="pi">:</span>

<span class="c1"># Enable logging</span>
<span class="na">logger</span><span class="pi">:</span>

<span class="c1"># Enable Home Assistant API</span>
<span class="na">api</span><span class="pi">:</span>

<span class="na">ota</span><span class="pi">:</span>

<span class="na">binary_sensor</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">platform</span><span class="pi">:</span> <span class="s">gpio</span>
    <span class="na">pin</span><span class="pi">:</span>
      <span class="na">number</span><span class="pi">:</span> <span class="s">GPIO0</span>
      <span class="na">mode</span><span class="pi">:</span> <span class="s">INPUT_PULLUP</span>
      <span class="na">inverted</span><span class="pi">:</span> <span class="no">true</span>
    <span class="na">id</span><span class="pi">:</span> <span class="s">button_1</span>
    <span class="na">on_press</span><span class="pi">:</span>
      <span class="na">then</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="na">light.toggle</span><span class="pi">:</span> <span class="s">light_1</span>

<span class="na">output</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">platform</span><span class="pi">:</span> <span class="s">gpio</span>
    <span class="na">pin</span><span class="pi">:</span> <span class="s">GPIO12</span>
    <span class="na">id</span><span class="pi">:</span> <span class="s">relay_1</span>

<span class="na">light</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">platform</span><span class="pi">:</span> <span class="s">binary</span>
    <span class="na">name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Light"</span>
    <span class="na">id</span><span class="pi">:</span> <span class="s">light_1</span>
    <span class="na">output</span><span class="pi">:</span> <span class="s">relay_1</span>

<span class="na">status_led</span><span class="pi">:</span>
  <span class="na">pin</span><span class="pi">:</span>
    <span class="na">number</span><span class="pi">:</span> <span class="s">GPIO13</span>
    <span class="na">inverted</span><span class="pi">:</span> <span class="no">true</span>
</code></pre></div></div>

        
      </section>

      <footer class="page__meta">
        
        
  


  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-tags" aria-hidden="true"></i> Tags: </strong>
    <span itemprop="keywords">
    
      <a href="/tags/esphome" class="page__taxonomy-item" rel="tag">ESPHome</a><span class="sep">, </span>
    
      <a href="/tags/hass-io" class="page__taxonomy-item" rel="tag">hass.io</a><span class="sep">, </span>
    
      <a href="/tags/home-assistant" class="page__taxonomy-item" rel="tag">Home Assistant</a><span class="sep">, </span>
    
      <a href="/tags/sonoff" class="page__taxonomy-item" rel="tag">Sonoff</a><span class="sep">, </span>
    
      <a href="/tags/t4" class="page__taxonomy-item" rel="tag">t4</a><span class="sep">, </span>
    
      <a href="/tags/t4eu1c" class="page__taxonomy-item" rel="tag">t4eu1c</a>
    
    </span>
  </p>




  


  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-folder-open" aria-hidden="true"></i> Categories: </strong>
    <span itemprop="keywords">
    
      <a href="/categories/smart-home" class="page__taxonomy-item" rel="tag">smart-home</a>
    
    </span>
  </p>


        

  <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Updated:</strong> <time datetime="2020-12-13T00:00:00+00:00">December 13, 2020</time></p>


      </footer>

      <section class="page__share">
  
    <h4 class="page__share-title">Share on..</h4>
  

  <a href="https://twitter.com/intent/tweet?text=Hacking+Sonoff+T4EU1C+with+ESPHOME%20https%3A%2F%2Fweissnix4711.github.io%2Fsmart-home%2F2020%2F12%2F13%2Fsonoff-t4eu1c%2F" class="btn btn--twitter" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on.. Twitter"><i class="fab fa-fw fa-twitter" aria-hidden="true"></i><span> Twitter</span></a>

  <a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fweissnix4711.github.io%2Fsmart-home%2F2020%2F12%2F13%2Fsonoff-t4eu1c%2F" class="btn btn--facebook" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on.. Facebook"><i class="fab fa-fw fa-facebook" aria-hidden="true"></i><span> Facebook</span></a>

  <a href="https://www.linkedin.com/shareArticle?mini=true&url=https%3A%2F%2Fweissnix4711.github.io%2Fsmart-home%2F2020%2F12%2F13%2Fsonoff-t4eu1c%2F" class="btn btn--linkedin" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on.. LinkedIn"><i class="fab fa-fw fa-linkedin" aria-hidden="true"></i><span> LinkedIn</span></a>
</section>


      
  <nav class="pagination">
    
      <a href="#" class="pagination--pager disabled">Previous</a>
    
    
      <a href="/smart-home/2022/08/30/hass-cctv/" class="pagination--pager" title="My Home Assistant CCTV camera setup
">Next</a>
    
  </nav>

    </div>

    
      <div class="page__comments">
  
  
      <h4 class="page__comments-title">Comments</h4>
      <section id="utterances-comments"></section>
    
</div>

    
  </article>

  
  
    <div class="page__related">
      <h4 class="page__related-title">You May Also Enjoy</h4>
      <div class="grid__wrapper">
        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/homelab/2024/05/14/dell-h310-it-mode/" rel="permalink">Dell PERC H310 raid card flashed to IT Mode
</a>
      
    </h2>
    

  <p class="page__meta">
    

    

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          6 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">Guide to flashing the Dell PERC H310 card to IT Mode
</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/teardown/2023/12/27/pinephone-battery-charger/" rel="permalink">PinePhone (Pro) Battery Charger Teardown
</a>
      
    </h2>
    

  <p class="page__meta">
    

    

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          1 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">Teardown of the Pine64 Pinephone standalone battery charger
</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/linux-mobile/2023/03/06/dnscrypt/" rel="permalink">DNSCrypt + Dnsmasq setup with Waydroid
</a>
      
    </h2>
    

  <p class="page__meta">
    

    

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          1 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">A short and simple guide to setting up DNSCrypt and dnsmasq.
</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/smart-home/2022/08/30/hass-cctv/" rel="permalink">My Home Assistant CCTV camera setup
</a>
      
    </h2>
    

  <p class="page__meta">
    

    

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          3 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">A guide to setting up ESPHome-based cameras with both Home Assistant and motionEye.
</p>
  </article>
</div>

        
      </div>
    </div>
  
  
</div>

    </div>

    
      <div class="search-content">
        <div class="search-content__inner-wrap"><form class="search-content__form" onkeydown="return event.key != 'Enter';">
    <label class="sr-only" for="search">
      Enter your search term...
    </label>
    <input type="search" id="search" class="search-input" tabindex="-1" placeholder="Enter your search term..." />
  </form>
  <div id="results" class="results"></div></div>

      </div>
    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    

    
      
        
          <li><a href="https://github.com/Weissnix4711/weissnix4711.github.io" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
        
      
    

    
      <li><a href="/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
    
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2025 Thomas Aldrian. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>

      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>




<script src="/assets/js/lunr/lunr.min.js"></script>
<script src="/assets/js/lunr/lunr-store.js"></script>
<script src="/assets/js/lunr/lunr-en.js"></script>




    <script>
  'use strict';

  (function() {
    var commentContainer = document.querySelector('#utterances-comments');

    if (!commentContainer) {
      return;
    }

    var script = document.createElement('script');
    script.setAttribute('src', 'https://utteranc.es/client.js');
    script.setAttribute('repo', 'weissnix4711/weissnix4711.github.io');
    script.setAttribute('issue-term', 'pathname');
    script.setAttribute('theme', 'github-dark');
    script.setAttribute('crossorigin', 'anonymous');

    commentContainer.appendChild(script);
  })();
</script>

  





  </body>
</html>
